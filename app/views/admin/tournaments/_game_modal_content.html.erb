<%= turbo_frame_tag "game_modal_#{game.id}" do %>
  <%= simple_form_for game, url: admin_tournament_game_path(tournament, game), method: :patch, local: true, html: { multipart: true } do |f| %>
    <div class="modal-body">
      <div class="row">
        <div class="col-md-6">
          <h6 class="text-primary">Informations du match</h6>
          <div class="mb-3">
            <strong><%= game.home_team.name %></strong> vs <strong><%= game.away_team.name %></strong>
          </div>

          <div class="mb-3">
            <%= f.label :game_start, "Heure du match", class: "form-label" %>
            <%= f.datetime_field :game_start, class: "form-control" %>
            <div class="form-text">Format: JJ/MM/AAAA HH:MM</div>
          </div>

          <%= f.input :court_number,
                      label: "Numéro de terrain",
                      input_html: { class: "form-control", placeholder: "ex: Terrain 1" } %>
        </div>

        <div class="col-md-6">
          <h6 class="text-primary">Scores</h6>
          <div class="row">
            <div class="col-6">
              <%= f.input :home_score,
                          label: game.home_team.name,
                          as: :integer,
                          input_html: { class: "form-control", min: 0 } %>
            </div>
            <div class="col-6">
              <%= f.input :away_score,
                          label: game.away_team.name,
                          as: :integer,
                          input_html: { class: "form-control", min: 0 } %>
            </div>
          </div>
        </div>
      </div>

      <div class="row mt-3">
        <div class="col-12">
          <h6 class="text-primary">Arbitres</h6>
          <%= f.input :referee_ids,
                      label: false,
                      as: :check_boxes,
                      collection: referees.map { |r| [r.name, r.id] },
                      input_html: { class: "form-check-input" },
                      wrapper_html: { class: "form-check" },
                      hint: "Sélectionnez les arbitres pour ce match" %>
        </div>
      </div>
    </div>

    <div class="modal-footer">
      <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
      <%= f.submit "Mettre à jour", class: "btn btn-primary" %>
    </div>
  <% end %>
<% end %>
